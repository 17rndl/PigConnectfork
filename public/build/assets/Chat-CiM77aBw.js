import{Q as f,l as i,m as w,c,a as h,u as l,w as m,F as g,o as d,Z as y,b as t,p as k,n as x,t as C,i as b,s as j,y as B}from"./app-DQs3gJAQ.js";import{_ as E}from"./AuthenticatedLayout-D8X1uTUX.js";import"./ApplicationLogo-Cu1tKf1_.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const M={class:"chat-container"},N={class:"chat-messages"},T={class:"chat-input"},$={__name:"Chat",setup(S){const{props:r}=f(),u=r.auth.user.id,n=i([]),o=i(""),v=i(null),_=async()=>{try{const e=await fetch("/api/chat/messages",{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${r.auth.user.api_token}`}});if(!e.ok)throw new Error("Network response was not ok");const s=await e.json();n.value=s}catch(e){console.error("Error fetching messages:",e)}},p=async()=>{if(o.value.trim())try{const e=await fetch("/api/chat/messages",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r.auth.user.api_token}`},body:JSON.stringify({receiver_id:v.value,message:o.value})});if(!e.ok)throw new Error("Network response was not ok");const s=await e.json();n.value.push(s),o.value=""}catch(e){console.error("Error sending message:",e)}};return w(()=>{_()}),(e,s)=>(d(),c(g,null,[h(l(y),{title:"Dashboard"}),h(E,null,{header:m(()=>s[1]||(s[1]=[t("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"},"Chat",-1)])),default:m(()=>[t("div",M,[t("div",N,[(d(!0),c(g,null,k(n.value,a=>(d(),c("div",{key:a.id,class:"chat-message"},[t("div",{class:x({"chat-message-sent":a.sender_id===l(u),"chat-message-received":a.sender_id!==l(u)})},[t("p",null,C(a.message),1)],2)]))),128))]),t("div",T,[b(t("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>o.value=a),onKeyup:B(p,["enter"]),placeholder:"Type a message..."},null,544),[[j,o.value]]),t("button",{onClick:p},"Send")])])]),_:1})],64))}};export{$ as default};
